<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.itwillbs.mappers.orderMapper">
  
  <resultMap type="com.itwillbs.domain.MaterialVO" id="MaterialVO">
  <result property="OrderVO" column="OrderVO"/>
  <result property="ma_id" column="ma_id"/>
  <result property="ma_name" column="ma_name"/>
  <result property="ma_qty" column="ma_qty"/>
   <result property="ma_shelt_position" column="ma_shelt_position"/>
  </resultMap>
  <resultMap type="com.itwillbs.domain.OrderVO" id="OrderVO">
    <result property="OrderVO" column="OrderVO"/>
    <result property="order_id" column="order_id"/>
    <result property="ma_id" column="ma_id"/>
    <result property="order_qty" column="order_qty"/>
  </resultMap>
   <!-- 발주목록 조회  -->              
      <select id="getOrderList" parameterType="MaterialVO" resultMap="MaterialVO">
       SELECT o.order_id, m.ma_name, o.order_qty, m.ma_qty, m.shelt_position, m.ma_id
		FROM material m
		JOIN 
		orders o
		ON m.ma_id = o.ma_id
		
      </select>
   <!-- 발주목록 조회  -->
       <insert id="orderInsert">
         insert into orders (order_id, ma_id, order_maName, order_qty, order_unitCost, order_sum, order_vat, whs_num, order_emp, order_date,due_date,in_date)
         values (#{order_id}, #{ma_id}, #{order_maName}, #{order_qty}, #{order_unitCost}, #{order_sum},#{order_vat}, #{whs_num},#{order_emp},now(),now(),now())
       </insert>
       
        <!-- 입고 정보 상세보기 -->	
	<select id="getOrderInfo" resultType="com.itwillbs.domain.OrderVO">
		SELECT o.order_id, o.due_date, o.order_date, o.order_emp, m.ma_name, o.order_qty, m.ma_qty, m.shelt_position
		FROM material m, orders o
		WHERE m.ma_id = o.ma_id
	</select>
 <!-- 입고 정보 상세보기 -->	
 	
      </mapper>